var aitJ=jQuery.noConflict(!0);(function(n){function t(i,r,u){if(!(this instanceof t))throw new Error("Constructor called as a function");this.container=i;this.vuzID=r;this.persisted=null;this.options=n.extend({},this.defaultOptions,u);this.options.isEmployeeMode?(n(n.proxy(this.initLayoutEmployee,this)),this.$(".ait-schedlfind-empfac .ait-schedlfind-fac").live("change",n.proxy(this.fillChairedEmployeeDict,this)),this.$(".ait-schedlfind-empfac .ait-schedlfind-ch").live("change",n.proxy(this.fillEmployeeDict,this)),this.$(".ait-schedlfind-emp").live("change",n.proxy(this.refreshGoButton,this))):(n(n.proxy(this.initLayout,this)),this.$(".ait-schedlfind-sg-filters select").live("change",n.proxy(this.actOnFiltersChanged,this)),this.$(".ait-schedlfind-sg").live("change",n.proxy(this.actOnStudyGroupChanged,this)));this.$(".ait-schedlfind-go").live("click",n.proxy(this.requestSchedule,this))}n.cookie=function(t,i,r){var e,u,o,s,f,h;if(typeof i!="undefined"){r=r||{};i===null&&(i="",r.expires=-1);e="";r.expires&&(typeof r.expires=="number"||r.expires.toUTCString)&&(typeof r.expires=="number"?(u=new Date,u.setTime(u.getTime()+r.expires*864e5)):u=r.expires,e="; expires="+u.toUTCString());var c=r.path?"; path="+r.path:"",l=r.domain?"; domain="+r.domain:"",a=r.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(i),e,c,l,a].join("")}else{if(o=null,document.cookie&&document.cookie!="")for(s=document.cookie.split(";"),f=0;f<s.length;f++)if(h=n.trim(s[f]),h.substring(0,t.length+1)==t+"="){o=decodeURIComponent(h.substring(t.length+1));break}return o}};ait.Schedule=t;t.prototype={defaultOptions:{isRenderHeader:!0,isForceTextStyles:!0,isFullEmployeeName:!1,textFontSize:13,isEmployeeMode:!1,isRenderStudyTypeFilter:!1,isRenderStudyTimePeriod:!1,renderStudyTimePeriodPosition:"bottom"},$:function(t){return n(t,this.container)},$aitGet:function(t,i,r,u){n.ajax({type:"GET",dataType:"json",url:ait.service_base+"/WidgetSchedule.asmx/"+t+"?callback=?",data:i,cache:u,success:n.proxy(r,this),complete:this.checkCompleteForError})},checkCompleteForError:function(n){n&&n.status==500&&alert("Сталася помилка під час отримання даних!\n"+n.responseText)},minDatepickerDate:new Date(2e3,0,1,0,0,0,0),maxDatepickerDate:new Date(2100,11,31,23,59,59,99),renderHeader:function(n){this.options.isRenderHeader&&n.prepend('<h3 class="ait-schedlfind-heading">Розклад<\/h3>')},initPickers:function(){var t=this.$(".ait-schedlfind-cal1,.ait-schedlfind-cal2"),i=this;t.datepicker({dateFormat:"dd.mm.yy",firstDay:1,dayNamesMin:["Нд","Пн","Вт","Ср","Чт","Птн","Сб"],monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthNamesShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],prevText:"Попередній місяць",nextText:"Наступний місяць",showOtherMonths:!0,selectOtherMonths:!0,onSelect:function(r){var s=n(this).hasClass("ait-schedlfind-cal1")?"minDate":"maxDate",h=n(this).hasClass("ait-schedlfind-cal1")?7:-7,f=n(this).data("datepicker"),u=n.datepicker.parseDate(f.settings.dateFormat,r,f.settings),e=t.not(this).datepicker("option",s,u),o;return e.val()||(o=new Date(u.setDate(u.getDate()+h)),e.datepicker("setDate",o)),i.refreshGoButton(),!0}}).live("change",function(){var u=n(this).hasClass("ait-schedlfind-cal1")?"minDate":"maxDate",e=n(this).hasClass("ait-schedlfind-cal1")?i.minDatepickerDate:i.maxDatepickerDate,f=n(this).data("datepicker"),r;try{r=n.datepicker.parseDate(f.settings.dateFormat,n(this).val(),f.settings)}catch(o){r=new Date;n(this).datepicker("setDate",r)}r?t.not(this).datepicker("option",u,r):t.not(this).datepicker("option",u,e);i.refreshGoButton()}).datepicker("widget").addClass("ait-schedl-picker");t.datepicker("option","minDate",i.minDatepickerDate);t.datepicker("option","maxDate",i.maxDatepickerDate)},fillPickersWithPersisted:function(){if(this.persisted){var i,r,t=this.$(".ait-schedlfind-cal1").data("datepicker").settings;try{i=n.datepicker.parseDate(t.dateFormat,this.persisted.aStartDate,t)}catch(u){return}this.$(".ait-schedlfind-cal1").val(this.persisted.aStartDate);this.$(".ait-schedlfind-cal2").datepicker("option","minDate",i);try{r=n.datepicker.parseDate(t.dateFormat,this.persisted.aEndDate,t)}catch(u){return}this.$(".ait-schedlfind-cal2").val(this.persisted.aEndDate)}},getForcedFontCSS:function(){return".ait-schedl,.ait-schedl div,.ait-schedl span,.ait-schedl applet,.ait-schedl object,.ait-schedl iframe,.ait-schedl h1,.ait-schedl h2,.ait-schedl h3,.ait-schedl h4,.ait-schedl h5,.ait-schedl h6,.ait-schedl p,.ait-schedl blockquote,.ait-schedl pre,.ait-schedl a,.ait-schedl abbr,.ait-schedl acronym,.ait-schedl address,.ait-schedl big,.ait-schedl cite,.ait-schedl code,.ait-schedl del,.ait-schedl dfn,.ait-schedl em,.ait-schedl font,.ait-schedl img,.ait-schedl ins,.ait-schedl kbd,.ait-schedl q,.ait-schedl s,.ait-schedl samp,.ait-schedl small,.ait-schedl strike,.ait-schedl strong,.ait-schedl sub,.ait-schedl sup,.ait-schedl tt,.ait-schedl var,.ait-schedl b,.ait-schedl u,.ait-schedl i,.ait-schedl center,.ait-schedl dl,.ait-schedl dt,.ait-schedl dd,.ait-schedl ol,.ait-schedl ul,.ait-schedl li,.ait-schedl fieldset,.ait-schedl form,.ait-schedl label,.ait-schedl legend,.ait-schedl table,.ait-schedl caption,.ait-schedl tbody,.ait-schedl tfoot,.ait-schedl thead,.ait-schedl tr,.ait-schedl th,.ait-schedl td, .ait-schedl input, .ait-schedl select { font-size: "+this.options.textFontSize+'px !important; font-family: Arial, sans-serif, "MS Sans Serif"; } .ait-schedl .ait-schedlfind-indent { width: '+this.options.textFontSize*9+"px !important; } .ait-schedl .ait-schedlfind-fac { width: "+Math.floor(this.options.textFontSize*11.42)+"px !important; } .ait-schedl-picker { font-size: "+this.options.textFontSize+'px !important; font-family: Arial, sans-serif, "MS Sans Serif"; } .ait-schedl .ait-schedlfind-cal1,.ait-schedl .ait-schedlfind-cal2 { width: '+this.options.textFontSize*14+"px !important; } .ait-schedl .ait-schedlfind-stypes { width: "+(this.options.textFontSize*14+5)+"px !important; } .ait-schedl .ait-schedlfind-rem {left: "+this.options.textFontSize*44+"px !important;} .ait-schedl .ait-schedl-foot,.ait-schedl .ait-schedl-foot a { font-size: 0.8em !important; }"},getRemarkHTML:function(n,t){return'<div class="ait-schedlfind-rem ait-schedlfind-'+n+'">&nbsp;&larr; виберіть '+t+"<\/div>"},getSelectHTML:function(n,t){return'<select class="ait-schedlfind-'+n+'"><option value="">--(виберіть '+t+")--<\/option><\/select>"},getClearHTML:function(){return'<div class="ait-schedlfind-clear"/>'},getStudyTypesHTML:function(){return'<div class="ait-schedlfind-block ait-schedlfind-stypes-block"><div class="ait-schedlfind-indent">Тип занять: <\/div><select class="ait-schedlfind-stypes"><option value="">Всі<\/option><\/select><\/div>'},minifyRemarks:function(){this.$(".ait-schedlfind-rem").width()<100&&this.$(".ait-schedlfind-rem").html("&nbsp;&larr;&nbsp;&larr;")},getPickersAndRemainingHTML:function(){return this.getClearHTML()+this.getRemarkHTML("date-remark","дати")+'<div class="ait-schedlfind-datepickers"><div class="ait-schedlfind-indent">Дата від <\/div><input type="text" class="ait-schedlfind-cal1" />&nbsp;&nbsp;&nbsp;&nbsp;Дата по&nbsp;&nbsp;&nbsp; <input type="text" class="ait-schedlfind-cal2" /><\/div>'+this.getClearHTML()+(this.options.isRenderStudyTypeFilter?this.getStudyTypesHTML():"")+"<div><button class=\"ait-schedlfind-go\" disabled=\"disabled\">Вивести<\/button><\/div><div class=\"ait-schedl-container\"><\/div><div class='ait-schedl-mobbtns'><a href='https://play.google.com/store/apps/details?id=com.zoria2010.ASDekanatApp' class='ait-schedl-badge-google'><img alt='Завантажити з Google Play' src='https://play.google.com/intl/en_us/badges/static/images/badges/ua_badge_web_generic.png' width='130' height='50' /><\/a><\/div><div class='ait-schedl-foot'>Розклад створено за допомогою <a href='http://vuz.osvita.net/' target='_blank'>АСК «ВНЗ»<\/a>; &nbsp; &copy; <a href='http://ndipit.com.ua/' target='_blank'>ПрАТ «НДІ ПІТ»<\/a>, 2012-2024<\/div>"},getPersistName:function(){return this.options.isEmployeeMode?"ait-schedl-emp":"ait-schedl"},initLayout:function(){var t=n(this.container);if(t.length!==1)throw new Error("No correct schedule container found");t.addClass("ait-schedl");this.options.isForceTextStyles&&n("head").append('<style type="text/css">'+this.getForcedFontCSS()+".ait-schedl .ait-schedlfind-edu { width: "+Math.floor(this.options.textFontSize*14.28)+"px !important; } .ait-schedl .ait-schedlfind-cour { width: "+Math.floor(this.options.textFontSize*9.07)+"px !important; } .ait-schedl .ait-schedlfind-sg { width: "+Math.floor(this.options.textFontSize*25.71)+"px !important; } <\/style>");this.renderHeader(t);this.options.studyGroupId||(t.append('<p class="ait-schedlfind-remark">Виберіть навчальну групу та дату або діапазон дат для перегляду розкладу<\/p>'+this.getRemarkHTML("filters-remark","будь-який")+'<div class="ait-schedlfind-sg-filters"><div class="ait-schedlfind-indent">Фільтри: <\/div>'+this.getSelectHTML("fac","факультет")+this.getSelectHTML("edu","форму навчання")+this.getSelectHTML("cour","курс")+"<\/div>"+this.getClearHTML()+this.getRemarkHTML("sg-remark","групу")+'<div class="ait-schedlfind-sg-block"><div class="ait-schedlfind-indent">Навчальна група: <\/div>'+this.getSelectHTML("sg","групу")+"<\/div>"),this.$(".ait-schedlfind-sg").attr("disabled","disabled"));t.append(this.getPickersAndRemainingHTML());this.initGeneralAreas();this.fillStudentDicts()},initLayoutEmployee:function(){var t=n(this.container);if(t.length!==1)throw new Error("No correct schedule container found");t.addClass("ait-schedl");this.options.isForceTextStyles&&n("head").append('<style type="text/css">'+this.getForcedFontCSS()+".ait-schedl .ait-schedlfind-empfac .ait-schedlfind-fac { width: "+Math.floor(this.options.textFontSize*14)+"px !important; } .ait-schedl .ait-schedlfind-ch { width: "+Math.floor(this.options.textFontSize*14)+"px !important; } .ait-schedl .ait-schedlfind-emp { width: "+Math.floor(this.options.textFontSize*14)+"px !important; } <\/style>");this.renderHeader(t);t.append('<p class="ait-schedlfind-remark">Виберіть співробітника та дату або діапазон дат для перегляду розкладу<\/p>'+this.getRemarkHTML("empfac-remark","факультет")+'<div class="ait-schedlfind-block ait-schedlfind-empfac"><div class="ait-schedlfind-indent">Факультет: <\/div>'+this.getSelectHTML("fac","факультет")+"&nbsp;&nbsp;&nbsp;&nbsp;Кафедра: &nbsp;&nbsp;"+this.getSelectHTML("ch","кафедру")+"<\/div>"+this.getClearHTML()+this.getRemarkHTML("emp-remark","співр-ка")+'<div class="ait-schedlfind-block ait-schedlfind-empblock"><div class="ait-schedlfind-indent">Співробітник: <\/div>'+this.getSelectHTML("emp","співробітника")+"<\/div>"+this.getPickersAndRemainingHTML());this.$(".ait-schedlfind-ch,.ait-schedlfind-emp").attr("disabled","disabled");this.initGeneralAreas();this.fillEmployeeDicts()},initGeneralAreas:function(){this.minifyRemarks();this.initPickers();this.persisted=JSON.parse(localStorage.getItem(this.getPersistName()));this.fillPickersWithPersisted()},fillSelector:function(n,t){var i="";n.forEach(function(n){i+="<option value='"+n.Key+"'>"+n.Value+"<\/option>"});this.$(t).append(i)},prepareForGetJson:function(t){var i={};return n(Object.keys(t)).each(function(){var r=this,n=t[r];i[r]=typeof n=="boolean"?n:n?typeof n=="string"?'"'+n+'"':n:null}),i},fillEmployeeDicts:function(){this.$(".ait-schedlfind-remark").append('<img class="ait-wait" src="'+ait.service_base+'/wait16.gif" alt="Зачекайте, будь-лакска..." />');this.$aitGet("GetEmployeeFaculties",{aVuzID:this.vuzID},this.fillEmployeeDictsSuccess,!0)},fillEmployeeDictsSuccess:function(n){if(this.$(".ait-schedlfind-remark .ait-wait").remove(),!n.d){alert("unexpected error");return}this.fillSelector(n.d,".ait-schedlfind-fac");this.persisted&&(this.$(".ait-schedlfind-fac").val(this.persisted.aFacultyID),this.fillChairedEmployeeDict())},fillStudentDicts:function(){if(this.options.studyGroupId){this.requestSchedule();this.refreshGoButton();this.options.isRenderStudyTypeFilter&&(this.$(".ait-schedlfind-stypes-block").append('<img class="ait-wait" src="'+ait.service_base+'/wait16.gif" alt="Зачекайте, будь-лакска..." />'),this.$aitGet("GetStudyTypesSeparate",{aVuzID:this.vuzID},this.fillStudyTypesSeparateSuccess,!0));return}this.$(".ait-schedlfind-remark").append('<img class="ait-wait" src="'+ait.service_base+'/wait16.gif" alt="Зачекайте, будь-лакска..." />');this.$aitGet("GetStudentScheduleFiltersData",{aVuzID:this.vuzID},this.fillStudentDictsSuccess,!0)},fillStudyTypesSeparateSuccess:function(n){if(this.$(".ait-schedlfind-stypes-block .ait-wait").remove(),!n.d){alert("unexpected error");return}this.$(".ait-schedlfind-stypes option").not("[value=]").remove();this.fillSelector(n.d,".ait-schedlfind-stypes")},actOnFiltersChanged:function(){this.fillStudyGroupsDict();this.persisted&&this.persisted.aStudyGroupID||this.fillMessage();this.persistData()},actOnStudyGroupChanged:function(){this.refreshGoButton();this.fillMessage();this.persistData()},persistData:function(){var t={aVuzID:this.vuzID,aFacultyID:this.$(".ait-schedlfind-fac").val()};t=this.options.isEmployeeMode?n.extend(t,{aChairID:this.$(".ait-schedlfind-ch").val(),aEmployeeID:this.$(".ait-schedlfind-emp").val(),aStartDate:this.$(".ait-schedlfind-cal1").val(),aEndDate:this.$(".ait-schedlfind-cal2").val(),aStudyTypeID:this.$(".ait-schedlfind-stypes").val()||""}):n.extend(t,{aEducationForm:this.$(".ait-schedlfind-edu").val(),aCourse:this.$(".ait-schedlfind-cour").val(),aStudyGroupID:this.$(".ait-schedlfind-sg").val(),aStartDate:this.$(".ait-schedlfind-cal1").val(),aEndDate:this.$(".ait-schedlfind-cal2").val(),aStudyTypeID:this.$(".ait-schedlfind-stypes").val()||""});localStorage.setItem(this.getPersistName(),JSON.stringify(t))},getDataToPersist:function(){return this.options.isEmployeeMode?n.extend({},this.getEmployeeRequestData(),this.getScheduleRequestData()):n.extend({},this.getStudyGroupDictRequestData(),this.getScheduleRequestData())},fillStudentDictsSuccess:function(n){if(this.$(".ait-schedlfind-remark .ait-wait").remove(),!n.d||!n.d.faculties||!n.d.educForms||!n.d.courses){alert("unexpected error");return}this.fillSelector(n.d.faculties,".ait-schedlfind-fac");this.fillSelector(n.d.educForms,".ait-schedlfind-edu");this.fillSelector(n.d.courses,".ait-schedlfind-cour");this.persisted&&(this.$(".ait-schedlfind-fac").val(this.persisted.aFacultyID),this.$(".ait-schedlfind-edu").val(this.persisted.aEducationForm),this.$(".ait-schedlfind-cour").val(this.persisted.aCourse),this.actOnFiltersChanged())},getStudyGroupDictRequestData:function(){return{aVuzID:this.vuzID,aFacultyID:this.$(".ait-schedlfind-fac").val(),aEducationForm:this.$(".ait-schedlfind-edu").val(),aCourse:this.$(".ait-schedlfind-cour").val(),aGiveStudyTimes:this.options.isRenderStudyTypeFilter}},getMessageRequestData:function(){return this.options.studyGroupId?{aVuzID:this.vuzID,aFacultyID:null,aEducationForm:null,aCourse:null,aStudyGroupID:this.options.studyGroupId}:{aVuzID:this.vuzID,aFacultyID:this.$(".ait-schedlfind-fac").val(),aEducationForm:this.$(".ait-schedlfind-edu").val(),aCourse:this.$(".ait-schedlfind-cour").val(),aStudyGroupID:this.$(".ait-schedlfind-sg").val()}},getChairedEmployeeDictRequestData:function(){return{aVuzID:this.vuzID,aFacultyID:this.$(".ait-schedlfind-fac").val(),aGiveStudyTimes:this.options.isRenderStudyTypeFilter}},getEmployeeRequestData:function(){return{aVuzID:this.vuzID,aFacultyID:this.$(".ait-schedlfind-fac").val(),aChairID:this.$(".ait-schedlfind-ch").val()}},fillMessage:function(){var n=this.getMessageRequestData();this.$aitGet("GetMessage",this.prepareForGetJson(n),this.fillMessageSuccess,!1)},fillMessageSuccess:function(n){this.renderMessage(n.d)},fillChairedEmployeeDict:function(){this.$(".ait-schedlfind-ch option,.ait-schedlfind-emp option").not("[value=]").remove();var n=this.getChairedEmployeeDictRequestData();n.aFacultyID?(this.$(".ait-schedlfind-empblock").append('<img class="ait-wait" src="'+ait.service_base+'/wait16.gif" alt="Зачекайте, будь-лакска..." />'),this.$aitGet("GetEmployeeChairs",this.prepareForGetJson(n),this.fillChairedEmployeeDictSuccess,!1)):(this.$(".ait-schedlfind-ch,.ait-schedlfind-emp").attr("disabled","disabled"),this.$(".ait-schedlfind-empfac-remark").fadeIn(),this.refreshGoButton())},fillChairedEmployeeDictSuccess:function(n){if(this.$(".ait-schedlfind-empblock .ait-wait").remove(),!n.d||!n.d.chairs||!n.d.employees||this.options.isRenderStudyTypeFilter&&!n.d.studyTypes){alert("unexpected error");return}this.$(".ait-schedlfind-ch,.ait-schedlfind-emp").removeAttr("disabled");this.$(".ait-schedlfind-empfac-remark").fadeOut();this.fillSelector(n.d.chairs,".ait-schedlfind-ch");this.fillSelector(n.d.employees,".ait-schedlfind-emp");this.options.isRenderStudyTypeFilter&&(this.$(".ait-schedlfind-stypes option").not("[value=]").remove(),this.fillSelector(n.d.studyTypes,".ait-schedlfind-stypes"));this.persisted&&(this.$(".ait-schedlfind-ch").val(this.persisted.aChairID),this.$(".ait-schedlfind-emp").val(this.persisted.aEmployeeID),this.requestSchedule());this.refreshGoButton()},fillEmployeeDict:function(){this.$(".ait-schedlfind-emp option").not("[value=]").remove();var n=this.getEmployeeRequestData();n.aFacultyID?(this.$(".ait-schedlfind-empblock").append('<img class="ait-wait" src="'+ait.service_base+'/wait16.gif" alt="Зачекайте, будь-лакска..." />'),this.$aitGet("GetEmployees",this.prepareForGetJson(n),this.fillEmployeeDictSuccess,!1)):this.refreshGoButton()},fillEmployeeDictSuccess:function(n){if(this.$(".ait-schedlfind-empblock .ait-wait").remove(),!n.d){alert("unexpected error");return}this.$(".ait-schedlfind-emp").removeAttr("disabled");this.fillSelector(n.d,".ait-schedlfind-emp");this.persisted&&(this.$(".ait-schedlfind-emp").val(this.persisted.aEmployeeID),this.requestSchedule());this.refreshGoButton()},fillStudyGroupsDict:function(){this.$(".ait-schedlfind-sg option").not("[value=]").remove();var n=this.getStudyGroupDictRequestData();n.aFacultyID||n.aEducationForm||n.aCourse?(this.$(".ait-schedlfind-sg-block").append('<img class="ait-wait" src="'+ait.service_base+'/wait16.gif" alt="Зачекайте, будь-лакска..." />'),this.$aitGet("GetStudyGroups",this.prepareForGetJson(n),this.fillStudyGroupsDictSuccess,!1)):(this.$(".ait-schedlfind-sg").attr("disabled","disabled"),this.$(".ait-schedlfind-filters-remark").fadeIn(),this.refreshGoButton())},fillStudyGroupsDictSuccess:function(n){if(this.$(".ait-schedlfind-sg-block .ait-wait").remove(),!n.d||!n.d.studyGroups||this.options.isRenderStudyTypeFilter&&!n.d.studyTypes){alert("unexpected error");return}this.$(".ait-schedlfind-sg").removeAttr("disabled");this.$(".ait-schedlfind-filters-remark").fadeOut();this.fillSelector(n.d.studyGroups,".ait-schedlfind-sg");this.options.isRenderStudyTypeFilter&&(this.$(".ait-schedlfind-stypes option").not("[value=]").remove(),this.fillSelector(n.d.studyTypes,".ait-schedlfind-stypes"));this.persisted&&(this.$(".ait-schedlfind-sg").val(this.persisted.aStudyGroupID),this.fillMessage(),this.requestSchedule());this.refreshGoButton()},getStudentScheduleRequestData:function(){var n=this.$(".ait-schedlfind-cal1").val(),t=this.$(".ait-schedlfind-cal2").val(),i=this.options.studyGroupId||this.$(".ait-schedlfind-sg").val(),r=this.$(".ait-schedlfind-stypes").val()||"";return this.options.studyGroupId||(i?this.$(".ait-schedlfind-sg-remark").fadeOut():this.$(".ait-schedlfind-sg-remark").fadeIn()),n&&t?this.$(".ait-schedlfind-date-remark").fadeOut():this.$(".ait-schedlfind-date-remark").fadeIn(),n&&t&&i?{aVuzID:this.vuzID,aStudyGroupID:i,aStartDate:n,aEndDate:t,aStudyTypeID:r}:null},getEmployeeScheduleRequestData:function(){var n=this.$(".ait-schedlfind-cal1").val(),t=this.$(".ait-schedlfind-cal2").val(),i=this.$(".ait-schedlfind-emp").val(),r=this.$(".ait-schedlfind-stypes").val()||"";return i?this.$(".ait-schedlfind-emp-remark").fadeOut():this.$(".ait-schedlfind-emp-remark").fadeIn(),n&&t?this.$(".ait-schedlfind-date-remark").fadeOut():this.$(".ait-schedlfind-date-remark").fadeIn(),n&&t&&i?{aVuzID:this.vuzID,aEmployeeID:i,aStartDate:n,aEndDate:t,aStudyTypeID:r}:null},getScheduleRequestData:function(){return this.options.isEmployeeMode?this.getEmployeeScheduleRequestData():this.getStudentScheduleRequestData()},refreshGoButton:function(){this.getScheduleRequestData()?this.$(".ait-schedlfind-go").removeAttr("disabled"):this.$(".ait-schedlfind-go").attr("disabled","disabled")},requestSchedule:function(t){t&&t.preventDefault();var r=n(this.container),i=this.getScheduleRequestData();if(this.persistData(),!i)return!1;this.$(".ait-schedl-container").prepend('<img class="ait-wait" src="'+ait.service_base+'/wait30trans.gif" alt="Зачекайте, будь-лакска..." />');this.$aitGet("GetScheduleData"+(this.options.isEmployeeMode?"Emp":"X"),this.prepareForGetJson(i),function(n){if(!n.d){alert("schedule unexpected error");return}this.$(".ait-schedl-container").empty();this.renderScheduleFromData(n.d)},!1)},shortenPIB:function(t){return t.split(" ")[0]+" "+n.makeArray(n(t.split(" ").slice(1)).map(function(){return this.charAt(0)+"."})).join("")},renderMessage:function(t,i){if(this.hasMessage=!i&&t,this.$(".ait-schedl-msg").remove(),t){var r=n("<div/>",{"class":"ait-schedl-msg"+(i?" ait-schedl-empty":""),text:t});this.$(".ait-schedl-container").before(r)}},renderScheduleFromData:function(t){var i,r;if(!this.hasMessage)if(t.length)this.$(".ait-schedl-msg").remove();else{this.renderMessage("На жаль, для вибраного діапазону дані відсутні.",!0);return}const o=t.length>0&&t.some(n=>!!n.chair_name);i="";r=this;i+='<h3 class="ait-schedl-header">'+this.$(".ait-schedlfind-sg option:selected").text()+"<\/h3>";i+="<table><tr><th>День<\/th><th>Час навчання<\/th><th>Контигент<\/th>"+(o?"<th>Кафедра<\/th>":"")+"<th>Дисципліна<\/th><th>Тип заняття<\/th><th>Аудиторія<\/th>"+(this.options.isEmployeeMode?"":"<th>Викладач<\/th>")+"<\/tr>";var s="",e="",u=0,f=0;n(t).each(function(){if(i+="<tr>",this.full_date!==s&&(i.indexOf("%rDate%")>=0&&(i=i.replace("%rDate%",u)),i+='<th rowspan=%rDate% class="ait-schedl-nextdate">'+this.week_day+"<br/>"+this.full_date+"<\/th>",s=this.full_date,u=0,e=""),this.study_time!==e){i.indexOf("%rTime%")>=0&&(i=i.replace("%rTime%",f));var n=r.options.isRenderStudyTimePeriod?(r.options.renderStudyTimePeriodPosition=="bottom"?"<br/>":"")+' <span class="ait-schedl-studytime">'+this.study_time_begin+"–"+this.study_time_end+"<\/span>":"";i+="<th rowspan=%rTime%>"+this.study_time+n+"<\/th>";e=this.study_time;f=0}u++;f++;i+="<td>"+this.contingent+"<\/td>"+(o?"<td>"+(this.chair_name||"&nbsp;")+"<\/td>":"")+"<td>"+this.discipline+"<\/td><td>"+(this.study_type||"&nbsp;")+"<\/td><td>"+(this.cabinet||"&nbsp;")+"<\/td>"+(r.options.isEmployeeMode?"":"<td>"+(r.options.isFullEmployeeName||!this.employee?this.employee||"&nbsp;":'<abbr title="'+this.employee+'">'+this.employee_short+"<\/abbr>")+"<\/td>");i+="<\/tr>"});i.indexOf("%rTime%")>=0&&(i=i.replace("%rTime%",f));i.indexOf("%rDate%")>=0&&(i=i.replace("%rDate%",u));i+="<\/table>";this.$(".ait-schedl-container").append(i);this.$(".ait-schedl-container th.ait-schedl-nextdate").closest("tr").slice(1).find("td").addClass("ait-schedl-topcell")}}})(aitJ);